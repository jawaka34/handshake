<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Handshake</title>
    <script src="src/global.js"></script>
    <script src="src/points.js"></script>
    <script src="src/handshake.js"></script>
    <script src="src/print.js"></script>
    <script src="src/move.js"></script>
    <script src="src/graph.js"></script>
    <link rel="stylesheet" type="text/css" href="style/style.css">
</head>

<body>
    <canvas id="main_canvas" width="500" height="500">
        Texte alternatif pour les navigateurs ne supportant pas Canvas.
    </canvas>

    <script>


var c = document.getElementById("main_canvas")
        var ctx = c.getContext("2d")
        points_print(ctx)

        c.addEventListener('mouseup', function (e){
            var mouse = get_mouse_coord(c, e)
            if ( move_point != -1){
                points[move_point] = [mouse.x, mouse.y]
                move_point = -1   
                points_print(ctx)
            }
        })

        c.addEventListener('mousemove', function (e){
            var mouse = get_mouse_coord(c, e)
            if ( move_point != -1){
                points[move_point] = [mouse.x, mouse.y]
                
                points_print(ctx)
            }
        })

        c.addEventListener('mousedown', function (e) {

            var mouse = get_mouse_coord(c, e)
            var mx = mouse.x
            var my = mouse.y
            if (point_clicked(mouse) != -1) {
                move_point = point_clicked(mouse)
            }
            else {
                add_point(mx, my)
                points_print(ctx)
            }

        })

    </script>
    
    <button type="button" onclick="points_reset(ctx)">Reset</button>

</body>

</html>